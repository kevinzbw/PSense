
def nice(y){
    x := sampleFrom("(x;y) => [-y<=x]*[x<=y]*x^2",y);
    return x;
}

def main(){
    x := nice(3);
    y := nice(4);
    return x+y; // expected: (-1/30·[-1+-r₁≤0]·r₁⁵+-128·[-r₁+1≠0]·[-r₁+1≤0]·r₁+-81/2·[-1+-r₁≤0]·r₁+1/30·[-1+r₁≤0]·r₁⁵+1024/5·[-1+-r₁≠0]·[1+r₁≤0]+1024/5·[-r₁+1≠0]·[-r₁+1≤0]+128·[-1+-r₁≠0]·[1+r₁≤0]·r₁+243/5·[-1+-r₁≤0]+243/5·[-1+r₁≤0]+64/3·[-1+-r₁≠0]·[1+r₁≤0]·r₁²+64/3·[-r₁+1≠0]·[-r₁+1≤0]·r₁²+81/2·[-1+r₁≤0]·r₁+9·[-1+-r₁≤0]·r₁²+9·[-1+r₁≤0]·r₁²)·(1/768·[-1+-r₁≠0]·[-7+-r₁≤0]·[1+r₁≤0]+1/768·[-1+-r₁≤0]·[-1+r₁≤0]+1/768·[-7+r₁≤0]·[-r₁+1≠0]·[-r₁+1≤0])
}
