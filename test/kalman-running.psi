// skipped

dat Person{
    running: ℝ;
    x: ℝ, v: ℝ;
    def Person(running: ℝ){
        this.running = running;
        this.x = 0;
        this.v = 0;
    }
    def updateRunning(){
        if running {
            running=flip(9/10);
        }else{
            running=flip(1/10);
        }
    }
    def update(){
        updateRunning();
        v = if running { 5 } else { 2.5 };
        x = x+v;
    }
    def measureX(x: ℝ){
        o := this.x + gauss(0,1);
        cobserve(o,x);
    }
}

def main(){
    p := Person(0);
    data := [0,2.5,5,10,16.5];
    for i in [0..data.length){
        p.update();
        p.measureX(data[i]);
    }
    return p.running; // expected: (1/400000·δ[-running+1]·⅟e^(287/4)+59049/400000·δ[running]·⅟e^(139/8)+6561/400000·δ[-running+1]·⅟e^(21/2)+6561/400000·δ[-running+1]·⅟e^(299/8)+6561/400000·δ[-running+1]·⅟e^(707/4)+6561/400000·δ[-running+1]·⅟e^(719/8)+6561/400000·δ[-running+1]·⅟e¹³+729/400000·δ[running]·⅟e^(109/8)+729/400000·δ[running]·⅟e^(1269/8)+729/400000·δ[running]·⅟e^(127/4)+729/400000·δ[running]·⅟e^(167/4)+729/400000·δ[running]·⅟e^(227/4)+729/400000·δ[running]·⅟e^(259/8)+729/400000·δ[running]·⅟e^(327/4)+729/400000·δ[running]·⅟e^(999/8)+729/400000·δ[running]·⅟e²³+729/400000·δ[running]·⅟e⁷⁸+81/400000·δ[-running+1]·⅟e^(127/4)+81/400000·δ[-running+1]·⅟e^(179/8)+81/400000·δ[-running+1]·⅟e^(187/4)+81/400000·δ[-running+1]·⅟e^(329/8)+81/400000·δ[-running+1]·⅟e^(397/4)+81/400000·δ[-running+1]·⅟e^(449/8)+81/400000·δ[-running+1]·⅟e^(499/8)+81/400000·δ[-running+1]·⅟e^(547/4)+81/400000·δ[-running+1]·⅟e^(699/8)+81/400000·δ[-running+1]·⅟e^(919/8)+9/400000·δ[running]·⅟e^(101/2)+9/400000·δ[running]·⅟e^(329/8)+9/400000·δ[running]·⅟e^(529/8)+9/400000·δ[running]·⅟e^(699/8)+9/400000·δ[running]·⅟e¹⁰³)·⅟(1/400000·⅟e^(287/4)·⅟π^(5/2)·⅟√2̅+59049/400000·⅟e^(139/8)·⅟π^(5/2)·⅟√2̅+6561/400000·⅟e^(21/2)·⅟π^(5/2)·⅟√2̅+6561/400000·⅟e^(299/8)·⅟π^(5/2)·⅟√2̅+6561/400000·⅟e^(707/4)·⅟π^(5/2)·⅟√2̅+6561/400000·⅟e^(719/8)·⅟π^(5/2)·⅟√2̅+6561/400000·⅟e¹³·⅟π^(5/2)·⅟√2̅+729/400000·⅟e^(109/8)·⅟π^(5/2)·⅟√2̅+729/400000·⅟e^(1269/8)·⅟π^(5/2)·⅟√2̅+729/400000·⅟e^(167/4)·⅟π^(5/2)·⅟√2̅+729/400000·⅟e^(227/4)·⅟π^(5/2)·⅟√2̅+729/400000·⅟e^(259/8)·⅟π^(5/2)·⅟√2̅+729/400000·⅟e^(327/4)·⅟π^(5/2)·⅟√2̅+729/400000·⅟e^(999/8)·⅟π^(5/2)·⅟√2̅+729/400000·⅟e²³·⅟π^(5/2)·⅟√2̅+729/400000·⅟e⁷⁸·⅟π^(5/2)·⅟√2̅+81/400000·⅟e^(179/8)·⅟π^(5/2)·⅟√2̅+81/400000·⅟e^(187/4)·⅟π^(5/2)·⅟√2̅+81/400000·⅟e^(397/4)·⅟π^(5/2)·⅟√2̅+81/400000·⅟e^(449/8)·⅟π^(5/2)·⅟√2̅+81/400000·⅟e^(499/8)·⅟π^(5/2)·⅟√2̅+81/400000·⅟e^(547/4)·⅟π^(5/2)·⅟√2̅+81/400000·⅟e^(919/8)·⅟π^(5/2)·⅟√2̅+81/40000·⅟e^(127/4)·⅟π^(5/2)·⅟√2̅+9/400000·⅟e^(101/2)·⅟π^(5/2)·⅟√2̅+9/400000·⅟e^(529/8)·⅟π^(5/2)·⅟√2̅+9/400000·⅟e¹⁰³·⅟π^(5/2)·⅟√2̅+9/40000·⅟e^(329/8)·⅟π^(5/2)·⅟√2̅+9/40000·⅟e^(699/8)·⅟π^(5/2)·⅟√2̅)·⅟π^(5/2)·⅟√2̅
}
